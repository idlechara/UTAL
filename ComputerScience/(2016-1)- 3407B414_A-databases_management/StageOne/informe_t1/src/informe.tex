\documentclass[11pt]{utalcaDoc}
\usepackage{alltt}
\usepackage{underscore}
\usepackage[latin1]{inputenc}
\usepackage[activeacute,spanish]{babel}
\usepackage{verbatim}
\usepackage[pdftex]{graphicx}
\usepackage{ae}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{pdflscape}
\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{placeins}
\input{spanishAlgorithmic}
\graphicspath{ {imgs/} }

\title{{\bf Bases de Datos Avanzadas}\\Informe etapa 1}
\author{Fabián Olivares, Erik Regla\\ \{olivares13,eregla09\}@alumnos.utalca.cl}
\date{19 de Abril del 2016}

\begin{document}
\renewcommand{\figurename}{Figura~}
\renewcommand{\tablename}{Tabla~}

\maketitle

\section{Etapa 2: Indexado}
\subsection{Base de datos normalizadas}
\subsubsection{Tiempo de carga en base de datos}
\begin{table}[h]
\centering
\caption{Tiempos de ejecución para cada script en milisegundos}
\label{TABLE:STAGE_2_LOAD}
\begin{tabular}{|l|c|c|c|c|}
\hline
\multicolumn{1}{|c|}{script}       & \textbf{non\_indexed} & \textbf{btree} & \textbf{hash} & \textbf{both} \\ \hline
\textbf{01\_table\_generation.sql} & 9                     & 11             & 4             & 9             \\ \hline
\textbf{02\_roles.sql}             & 69760                 & 69299          & 69586         & 69760         \\ \hline
\textbf{03\_problems.sql}          & 1964690               & 1958507        & 1982939       & 1964690       \\ \hline
\textbf{04\_countries.sql}         & 65882                 & 65776          & 65772         & 65882         \\ \hline
\textbf{05\_sites.sql}             & 672127                & 668997         & 671179        & 672127        \\ \hline
\textbf{06\_contests.sql}          & 918502                & 934399         & 917848        & 918502        \\ \hline
\textbf{07\_contestants.sql}       & 2021650               & 2069131        & 2077798       & 2021650       \\ \hline
\textbf{08\_problem\_sets.sql}     & 11099786              & 11066399       & 11095732      & 11099786      \\ \hline
\textbf{09\_contest\_sites.sql}    & 650900                & 650706         & 651507        & 650900        \\ \hline
\textbf{10\_teams.sql}             & 1846802               & 1837683        & 1877973       & 1846802       \\ \hline
\textbf{11\_scoreboards.sql}       & 3015905               & 3004977        & 3009461       & 3015905       \\ \hline
\textbf{12\_team\_members.sql}     & 3350787               & 3336618        & 3403136       & 3350787       \\ \hline
\textbf{13\_queries.sql}           & 3350787               & 1455           & 498           & 1558          \\ \hline
\end{tabular}
\end{table}

No se puede apreciar una diferencia notable entre los tiempos de carga para bases de datos con diferentes índices, siendo la diferencia más notoria con la tablas indexadas utilizando hash (ver Figura \ref{FIGURE:STAGE_2_LOAD_EXP}). Sin embargo, el tiempo total de ejecución para las instancias es claramente diferente (ver \texttt{13\_queries.sql} en Tabla \ref{TABLE:STAGE_2_LOAD}) .

De todas las tablas, la que más demoró en cargarse fue \texttt{problems} la cual dada su estructura es bastante más pesada debido a la columna \texttt{plain_text_content}, la cual en repetidas instancias contiene una cantidad importante de texto plano (ver Figuras \ref{FIGURE:STAGE_2_LOAD_1}, \ref{FIGURE:STAGE_2_LOAD_2}, \ref{FIGURE:STAGE_2_LOAD_3}, \ref{FIGURE:STAGE_2_LOAD_BOTH} ).

\begin{figure}[!ht]
  \centering
\includegraphics[scale=1]{E2exp1dl.png} 
  \caption{Tiempo de carga de experimento 1.}
  \label{FIGURE:STAGE_2_LOAD_1}
\end{figure}

\begin{figure}[!ht]
  \centering
\includegraphics[scale=1]{E2exp3dl.png} 
  \caption{Tiempo de carga de experimento 3.}
  \label{FIGURE:STAGE_2_LOAD_2}
\end{figure}

\begin{figure}[!ht]
  \centering
\includegraphics[scale=1]{E2exp5dl.png} 
  \caption{Tiempo de carga de experimento 5.}
  \label{FIGURE:STAGE_2_LOAD_3}
\end{figure}

\begin{figure}[!ht]
  \centering
\includegraphics[scale=1]{E2expbothdl.png} 
  \caption{Tiempo de carga de experimento btree + hash.}
  \label{FIGURE:STAGE_2_LOAD_BOTH}
\end{figure}

\begin{figure}[!ht]
  \centering
\includegraphics[scale=1]{E2135cmp.png} 
  \caption{Comparación en tiempo de carga de experimentos 1, 3, 5 y btree+hash.}
  \label{FIGURE:STAGE_2_LOAD_EXP}
\end{figure}
\FloatBarrier

\subsubsection{Ejecución de instancias}
\begin{table}[H]
\centering
\caption{Tiempos de ejecución por consulta en milisegundos}
\label{TABLE:STAGE_2_INSTANCES}
\begin{tabular}{|l|l|l|l|l|}
\hline
\textbf{Query} & \textbf{non\_indexed} & \textbf{btree} & \textbf{hash} & \textbf{both} \\ \hline
INDEX\_1       & 3072                  & 3156           & 12            & 14            \\ \hline
INDEX\_2       & 925                   & 872            & 3             & 2             \\ \hline
INDEX\_3       & 756                   & 753            & 2             & 2             \\ \hline
INDEX\_4       & 304                   & 407            & 2             & 2             \\ \hline
INDEX\_5       & 332                   & 320            & 2             & 1             \\ \hline
INDEX\_6       & 1913                  & 2136           & 6             & 7             \\ \hline
INDEX\_7       & 576                   & 536            & 3             & 1             \\ \hline
INDEX\_8       & 360                   & 629            & 2             & 3             \\ \hline
INDEX\_9       & 517                   & 731            & 4             & 4             \\ \hline
INDEX\_10      & 500                   & 396            & 5             & 4             \\ \hline
INDEX\_11      & 2490                  & 1169           & 1497          & 1032          \\ \hline
INDEX\_12      & 1170                  & 1159           & 704           & 454           \\ \hline
INDEX\_13      & 775                   & 1469           & 520           & 379           \\ \hline
INDEX\_14      & 971                   & 1375           & 712           & 397           \\ \hline
INDEX\_15      & 1400                  & 1179           & 965           & 438           \\ \hline
INDEX\_16      & 1979                  & 2012           & 583           & 306           \\ \hline
INDEX\_17      & 2068                  & 1283           & 527           & 280           \\ \hline
INDEX\_18      & 1644                  & 1631           & 524           & 302           \\ \hline
INDEX\_19      & 1462                  & 1433           & 537           & 285           \\ \hline
INDEX\_20      & 1558                  & 1455           & 498           & 287           \\ \hline
\end{tabular}
\end{table}

Sin necesidad de mencionar figuras o tablas en especial, es claramente notorio como los diferentes tipos de indices afectan las consultas (de rango o equidad) de la manera esperada (ver Anexo), sin embargo, es curioso como en algunas instancias, las consultas de rango realizadas con índices hash muestran una clara mejora en comparación a su contraparte con índices btree. Finalmente, al utilizar en conjunto ambos tipos de índices, las consultas exhiben un mejor rendimiento que en sus versiones separadas.

\begin{figure}[!ht]
  \label{}
  \centering
\includegraphics[scale=1]{E2exp2queries.png} 
  \caption{Tiempos de ejecución de consultas en experimento 2.}
\end{figure}

\begin{figure}[!ht]
  \label{}
  \centering
\includegraphics[scale=1]{E2exp4queries.png} 
  \caption{Tiempos de ejecución de consultas en experimento 4.}
\end{figure}

\begin{figure}[!ht]
  \label{}
  \centering
\includegraphics[scale=1]{E2exp6queries.png} 
  \caption{Tiempos de ejecución de consultas en experimento 6.}
\end{figure}

\begin{figure}[!ht]
  \label{}
  \centering
\includegraphics[scale=1]{E2expbothqueries.png} 
  \caption{Tiempos de ejecución de consultas en experimento btree + hash.}
\end{figure}

\begin{figure}[!ht]
  \label{}
  \centering
\includegraphics[scale=1]{E2246cmp.png} 
  \caption{Comparación en tiempo de experimentos 2, 4 y 6.}
\end{figure}
\FloatBarrier

\section{Etapa 3: Desnormalización}
\subsection{Tablas a desnormalizar y motivo}
\begin{enumerate}
\item \emph{Relación 1-1:} Se separa columna \texttt{plain_text_content} de \texttt{problems} porque es muy grande y no se consulta frecuentemente.
\item \emph{Relación 1-N no clave:} Nueva columna \texttt{contest_name} en tabla \texttt{problems} dado que consultar a que competencia pertenece un problema dado es bastante frecuente.
\item \emph{Relación 1-N clave:} Columna \texttt{country_id} añadida a tabla \texttt{teams} dado que es muy frecuente consultar el país atribuido a un equipo.
\item \emph{Relación N-M:} Nueva columna \texttt{team_name} a tabla \texttt{team_members} ya que es frecuente consultar los equipos en los que ha participado un competidor.
\item \emph{Tabla de búsqueda:} Se separa al malescrito \texttt{ballon_colour} de la tabla \texttt{problems} ya que son 20 colores que se utilizan. De este modo, reducir espacio en la base de datos.
\end{enumerate}
\subsection{Experimento 1: Carga}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{table}[H]
\centering
\caption{Estadisticas de migración}
\label{TABLE:STAGE_3_LOAD}
\begin{tabular}{|l|l|l|l|l|}
\hline
\textbf{Query} & \textbf{Aff. Rows} & \textbf{Time(ms)} & \textbf{Prev. Size (MB)}                                                & \textbf{Final size(MB)}                                                                 \\ \hline
C\_1, C\_2     & 1760088            & 7669              & problems = 534                                                          & \begin{tabular}[c]{@{}l@{}}d1\_problems\_content = 335\\ d1\_problems = 91\end{tabular} \\ \hline
C\_3           & 12520000           & 51977             & problems = 534                                                          & d1\_problems = 2698MB                                                                   \\ \hline
C\_4           & 2090000            & 3054              & sites = 28 teams = 101                                                  & d3\_teams = 107                                                                         \\ \hline
C\_5           & 4080000            & 4195              & \begin{tabular}[c]{@{}l@{}}team\_members = 80\\ team = 101\end{tabular} & d4\_team members = 137                                                                  \\ \hline
C\_6, C\_7     & 1760020            & 7070              & problems = 534                                                          & \begin{tabular}[c]{@{}l@{}}d5\_colours = 0.08\\ d5\_problems = 403\end{tabular}         \\ \hline
\end{tabular}
\end{table}

\begin{figure}[!ht]
  \centering
\includegraphics[scale=1]{E3denormdl.png} 
  \caption{Tiempos de carga para BD desnormalizada.}
  \label{T_CARGA}
\end{figure}

A modo de carga se utilizó una migración de datos a una tabla nueva a fin de poder comprar directamente el rendimiento de las consultas en diferentes tablas. Cabe destacar que en el enunciado nunca se especifica el método a usar para cargar los datos.


Las tablas con la nomenclatura \texttt{dX_} son tablas nuevas y adaptaciones para la base de datos original, a modo de poder diferenciar entre los tamaños de una u otra.

Como se puede observar en la Tabla \ref{TABLE:STAGE_3_LOAD} y en la Figura \ref{T_CARGA}, la desnormalización 2 que involucra a la tabla problemas fue la más costosa de todas, probablemente por el número de filas afectadas en la base de datos y tiempo de escritura en disco duro.

\subsection{Experimento 2: Instancias}

Exceptuando el caso de la desnormalización 2, las consultas exhibieron un mejor rendimiento para todos los casos. La desnormalización 2, la cual se realiza vía la Consulta C\_3 fue la que más sorprendió con un incremento de 300\% en el tamaño original de la tabla, el cual no es comparable con el resto de las modificaciones de la base de datos.

La normalización 5 que involucra las Consultas C\_6, C\_7 si bien mostró mejoras en la utilización del espacio, esta no fue tan diferente debido a que el texo almacenado para las consultas no excedía los 9 caracteres en peor caso.

\begin{table}[!ht]
\centering
\caption{Tiempos de ejecución por consulta en milisegundos}
\label{TABLE:STAGE_3_INSTANCES}
\begin{tabular}{|l|l|l|l|}
\hline
\textbf{\begin{tabular}[c]{@{}l@{}}Original\\ Query\end{tabular}} & \textbf{\begin{tabular}[c]{@{}l@{}}Original \\ Query Time\\ (ms)\end{tabular}} & \textbf{\begin{tabular}[c]{@{}l@{}}Denormalized\\ Query Time\\ (ms)\end{tabular}} & \textbf{\begin{tabular}[c]{@{}l@{}}Denormalized\\ Query\end{tabular}} \\ \hline
NORM\_1                                                           & 559                                                                            & 227                                                                               & DENORM\_1                                                             \\ \hline
NORM\_2                                                           & 484                                                                            & 213                                                                               & DENORM\_2                                                             \\ \hline
NORM\_3                                                           & 530                                                                            & 236                                                                               & DENORM\_3                                                             \\ \hline
NORM\_4                                                           & 574                                                                            & 216                                                                               & DENORM\_4                                                             \\ \hline
NORM\_5                                                           & 485                                                                            & 216                                                                               & DENORM\_5                                                             \\ \hline
NORM\_6                                                           & 1855                                                                           & 2381                                                                              & DENORM\_6                                                             \\ \hline
NORM\_7                                                           & 1332                                                                           & 3175                                                                              & DENORM\_7                                                             \\ \hline
NORM\_8                                                           & 1357                                                                           & 2978                                                                              & DENORM\_8                                                             \\ \hline
NORM\_9                                                           & 2072                                                                           & 2331                                                                              & DENORM\_9                                                             \\ \hline
NORM\_10                                                          & 2563                                                                           & 2295                                                                              & DENORM\_10                                                            \\ \hline
NORM\_11                                                          & 581                                                                            & 250                                                                               & DENORM\_11                                                            \\ \hline
NORM\_12                                                          & 281                                                                            & 241                                                                               & DENORM\_12                                                            \\ \hline
NORM\_13                                                          & 303                                                                            & 238                                                                               & DENORM\_13                                                            \\ \hline
NORM\_14                                                          & 394                                                                            & 232                                                                               & DENORM\_14                                                            \\ \hline
NORM\_15                                                          & 524                                                                            & 341                                                                               & DENORM\_15                                                            \\ \hline
NORM\_16                                                          & 669                                                                            & 254                                                                               & DENORM\_16                                                            \\ \hline
NORM\_17                                                          & 541                                                                            & 251                                                                               & DENORM\_17                                                            \\ \hline
NORM\_18                                                          & 697                                                                            & 250                                                                               & DENORM\_18                                                            \\ \hline
NORM\_19                                                          & 436                                                                            & 264                                                                               & DENORM\_19                                                            \\ \hline
NORM\_20                                                          & 530                                                                            & 255                                                                               & DENORM\_20                                                            \\ \hline
NORM\_21                                                          & 986                                                                            & 561                                                                               & DENORM\_21                                                            \\ \hline
NORM\_22                                                          & 835                                                                            & 497                                                                               & DENORM\_22                                                            \\ \hline
NORM\_23                                                          & 783                                                                            & 465                                                                               & DENORM\_23                                                            \\ \hline
NORM\_24                                                          & 897                                                                            & 534                                                                               & DENORM\_24                                                            \\ \hline
NORM\_25                                                          & 764                                                                            & 570                                                                               & DENORM\_25                                                            \\ \hline
\end{tabular}
\end{table}



\begin{figure}[!ht]
  \label{}
  \centering
\includegraphics[scale=1]{E3originalq.png} 
  \caption{Tiempos de consultas para BD original.}
\end{figure}


\begin{figure}[!ht]
  \label{}
  \centering
\includegraphics[scale=1]{E3denormq.png} 
  \caption{Tiempos de consultas para BD desnormalizada.}
\end{figure}


\begin{figure}[!ht]
  \label{}
  \centering
\includegraphics[scale=1]{E3qcomparison.png} 
  \caption{Comparación entre tiempos de consulta de BD original y desnormalizada.}
\end{figure}
\FloatBarrier

\section{Etapa 4: Vistas}
\begin{table}[H]
\centering
\caption{Tiempos de ejecución para PgAdmin3 y Conector en milisegundos}
\label{TABLE:STAGE_4_INSTANCES}
\begin{tabular}{|l|l|l|}
\hline
\textbf{Query} & \textbf{PgAdmin3} & \textbf{Conector} \\ \hline
FINAL\_1       & 1600              & 1906              \\ \hline
FINAL\_2       & 1600              & 1821              \\ \hline
FINAL\_3       & 32                & 1                 \\ \hline
FINAL\_4       & 1800              & 1722              \\ \hline
FINAL\_5       & 1800              & 1640              \\ \hline
\end{tabular}
\end{table}

\begin{figure}[!ht]
  \label{}
  \centering
\includegraphics[scale=1]{E4comp.png} 
  \caption{Comparación de tiempos de ejecución.}
\end{figure}
\FloatBarrier

No se puede apreciar gran diferencia entre la velocidad de las consultas utilizando un conector o la ``interfaz'' de PostgreSQL (que en realidad interfaz no tiene, también es un conector). Fuera de los resultados esperados vistos en clase no hay mayor novedad. Cabe destacar que PgAdmin3 cambia la unidad de medición de tiempo, volviéndola imprecisa (cambia de msecs a seg después de un segundo).

Como fue visto en clases la ejecución de la consulta en forma de vista materializada fue considerablemente mas rápida que el resto, tanto en el caso de ejecución en pgAdmin como de conector, debido a que guarda la tabla resultado de la consulta con anterioridad.



\section{Anexos}
\subsection{Tabla de Consultas}
% Please add the following required packages to your document preamble:
% \usepackage{graphicx}
\begin{table}[H]
\centering
\caption{Anexo 1: Lista de consultas}
\label{TABLE:CODE}
\resizebox{\textwidth}{!}{%
\begin{tabular}{|l|l|}
\hline
\textbf{Id} & \textbf{Query}                                                                                                                                                                                                                                                                                                                                     \\ \hline
NORM\_1     & SELECT,* FROM problems WHERE letter = 'a';                                                                                                                                                                                                                                                                                                         \\ \hline
NORM\_2     & SELECT,* FROM problems WHERE letter = 'B';                                                                                                                                                                                                                                                                                                         \\ \hline
NORM\_3     & SELECT,* FROM problems WHERE letter = 'Q';                                                                                                                                                                                                                                                                                                         \\ \hline
NORM\_4     & SELECT,* FROM problems WHERE letter = 'k';                                                                                                                                                                                                                                                                                                         \\ \hline
NORM\_5     & SELECT,* FROM problems WHERE letter = 'o';                                                                                                                                                                                                                                                                                                         \\ \hline
NORM\_6     & SELECT,problems.id,problems.letter,problems.pdf\_file,problems.ballon\_colour,problems.description,problems.codename,FROM problems,problem\_set,contests WHERE problem\_set.problem\_id = problems.id,AND problem\_set.contest\_id = contests.id AND contests.name = 'rrevanamuclefagla';                                                          \\ \hline
NORM\_7     & SELECT,problems.id,problems.letter,problems.pdf\_file,problems.ballon\_colour,problems.description,problems.codename,FROM problems,problem\_set,contests WHERE problem\_set.problem\_id = problems.id,AND problem\_set.contest\_id = contests.id AND contests.name = 'heochuiplirroedebokeerreobre';                                               \\ \hline
NORM\_8     & SELECT,problems.id,problems.letter,problems.pdf\_file,problems.ballon\_colour,problems.description,problems.codename,FROM problems,problem\_set,contests WHERE problem\_set.problem\_id = problems.id,AND problem\_set.contest\_id = contests.id AND contests.name = 'obropifuepogiquwecluoglechezojuka';                                          \\ \hline
NORM\_9     & SELECT,problems.id,problems.letter,problems.pdf\_file,problems.ballon\_colour,problems.description,problems.codename,FROM problems,problem\_set,contests WHERE problem\_set.problem\_id = problems.id,AND problem\_set.contest\_id = contests.id AND contests.name = 'cluplaqoblarriicaunagi';                                                     \\ \hline
NORM\_10    & SELECT,problems.id,problems.letter,problems.pdf\_file,problems.ballon\_colour,problems.description,problems.codename,FROM problems,problem\_set,contests WHERE problem\_set.problem\_id = problems.id,AND problem\_set.contest\_id = contests.id AND contests.name = 'uqugrodixucliclellotodrofuovohe';                                            \\ \hline
NORM\_11    & SELECT,teams.id,teams.name FROM teams,sites,countries WHERE teams.site\_id = sites.id,AND sites.country\_id = countries.id AND countries.name =,'huiqiblayobujezohoayi';                                                                                                                                                                           \\ \hline
NORM\_12    & SELECT,teams.id,teams.name FROM teams,sites,countries WHERE teams.site\_id = sites.id,AND sites.country\_id = countries.id AND countries.name = 'yeepegrarruebrayi';                                                                                                                                                                               \\ \hline
NORM\_13    & SELECT,teams.id,teams.name FROM teams,sites,countries WHERE teams.site\_id = sites.id,AND sites.country\_id = countries.id AND countries.name =,'juzouvaplufolerrohahublunuugloxa';                                                                                                                                                                \\ \hline
NORM\_14    & SELECT,teams.id,teams.name FROM teams,sites,countries WHERE teams.site\_id = sites.id,AND sites.country\_id = countries.id AND countries.name =,'cliglodriomovofabruubuxacahu';                                                                                                                                                                    \\ \hline
NORM\_15    & SELECT,teams.id,teams.name FROM teams,sites,countries WHERE teams.site\_id = sites.id,AND sites.country\_id = countries.id AND countries.name =,'sagleqehellomuezazaguhagradreewu';                                                                                                                                                                \\ \hline
NORM\_16    & SELECT,teams.id,teams.name FROM teams,team\_members WHERE team\_members.team\_id =,teams.id AND team\_members.contestant\_id = 5366;                                                                                                                                                                                                               \\ \hline
NORM\_17    & SELECT,teams.id,teams.name FROM teams,team\_members WHERE team\_members.team\_id =,teams.id AND team\_members.contestant\_id = 30686;                                                                                                                                                                                                              \\ \hline
NORM\_18    & SELECT,teams.id,teams.name FROM teams,team\_members WHERE team\_members.team\_id =,teams.id AND team\_members.contestant\_id = 98;                                                                                                                                                                                                                 \\ \hline
NORM\_19    & SELECT,teams.id,teams.name FROM teams,team\_members WHERE team\_members.team\_id =,teams.id AND team\_members.contestant\_id = 567;                                                                                                                                                                                                                \\ \hline
NORM\_20    & SELECT,teams.id,teams.name FROM teams,team\_members WHERE team\_members.team\_id =,teams.id AND team\_members.contestant\_id = 783549;                                                                                                                                                                                                             \\ \hline
NORM\_21    & SELECT,* FROM problems WHERE ballon\_colour = 'orange';                                                                                                                                                                                                                                                                                            \\ \hline
NORM\_22    & SELECT,* FROM problems WHERE ballon\_colour = 'blue';                                                                                                                                                                                                                                                                                              \\ \hline
NORM\_23    & SELECT,* FROM problems WHERE ballon\_colour = 'black';                                                                                                                                                                                                                                                                                             \\ \hline
NORM\_24    & SELECT,* FROM problems WHERE ballon\_colour = 'black';                                                                                                                                                                                                                                                                                             \\ \hline
NORM\_25    & SELECT,* FROM problems WHERE ballon\_colour = 'indigo';                                                                                                                                                                                                                                                                                            \\ \hline
DENORM\_1   & SELECT,* FROM d1\_problems WHERE letter = 'a';                                                                                                                                                                                                                                                                                                     \\ \hline
DENORM\_2   & SELECT,* FROM d1\_problems WHERE letter = 'B';                                                                                                                                                                                                                                                                                                     \\ \hline
DENORM\_3   & SELECT,* FROM d1\_problems WHERE letter = 'Q';                                                                                                                                                                                                                                                                                                     \\ \hline
DENORM\_4   & SELECT,* FROM d1\_problems WHERE letter = 'k';                                                                                                                                                                                                                                                                                                     \\ \hline
DENORM\_5   & SELECT,* FROM d1\_problems WHERE letter = 'o';                                                                                                                                                                                                                                                                                                     \\ \hline
DENORM\_6   & SELECT,d2\_problems.id,d2\_problems.letter,d2\_problems.pdf\_file,d2\_problems.ballon\_colour,d2\_problems.description,d2\_problems.codename,FROM d2\_problems WHERE contest\_name = 'rrevanamuclefagla';                                                                                                                                          \\ \hline
DENORM\_7   & SELECT,d2\_problems.id,d2\_problems.letter,d2\_problems.pdf\_file,d2\_problems.ballon\_colour,d2\_problems.description,d2\_problems.codename,FROM d2\_problems WHERE contest\_name = 'heochuiplirroedebokeerreobre';                                                                                                                               \\ \hline
DENORM\_8   & SELECT,d2\_problems.id,d2\_problems.letter,d2\_problems.pdf\_file,d2\_problems.ballon\_colour,d2\_problems.description,d2\_problems.codename,FROM d2\_problems WHERE contest\_name = 'obropifuepogiquwecluoglechezojuka';                                                                                                                          \\ \hline
DENORM\_9   & SELECT,d2\_problems.id,d2\_problems.letter,d2\_problems.pdf\_file,d2\_problems.ballon\_colour,d2\_problems.description,d2\_problems.codename,FROM d2\_problems WHERE contest\_name = 'cluplaqoblarriicaunagi';                                                                                                                                     \\ \hline
DENORM\_10  & SELECT,d2\_problems.id,d2\_problems.letter,d2\_problems.pdf\_file,d2\_problems.ballon\_colour,d2\_problems.description,d2\_problems.codename,FROM d2\_problems WHERE contest\_name = 'uqugrodixucliclellotodrofuovohe';                                                                                                                            \\ \hline
DENORM\_11  & SELECT,d3\_teams.id,d3\_teams.name FROM d3\_teams,countries WHERE countries.id =,d3\_teams.country\_id AND countries.name = 'huiqiblayobujezohoayi';                                                                                                                                                                                               \\ \hline
DENORM\_12  & SELECT,d3\_teams.id,d3\_teams.name FROM d3\_teams,countries WHERE countries.id =,d3\_teams.country\_id AND countries.name = 'yeepegrarruebrayi';                                                                                                                                                                                                   \\ \hline
DENORM\_13  & SELECT,d3\_teams.id,d3\_teams.name FROM d3\_teams,countries WHERE countries.id =,d3\_teams.country\_id AND countries.name = 'juzouvaplufolerrohahublunuugloxa';                                                                                                                                                                                    \\ \hline
DENORM\_14  & SELECT,d3\_teams.id,d3\_teams.name FROM d3\_teams,countries WHERE countries.id =,d3\_teams.country\_id AND countries.name = 'cliglodriomovofabruubuxacahu';                                                                                                                                                                                        \\ \hline
DENORM\_15  & SELECT,d3\_teams.id,d3\_teams.name FROM d3\_teams,countries WHERE countries.id =,d3\_teams.country\_id AND countries.name = 'sagleqehellomuezazaguhagradreewu';                                                                                                                                                                                    \\ \hline
DENORM\_16  & SELECT,d4\_team\_members.team\_id,d4\_team\_members.team\_name FROM d4\_team\_members WHERE,d4\_team\_members.contestant\_id = 5366;                                                                                                                                                                                                               \\ \hline
DENORM\_17  & SELECT,d4\_team\_members.team\_id,d4\_team\_members.team\_name FROM d4\_team\_members WHERE,d4\_team\_members.contestant\_id = 30686;                                                                                                                                                                                                              \\ \hline
DENORM\_18  & SELECT,d4\_team\_members.team\_id,d4\_team\_members.team\_name FROM d4\_team\_members WHERE,d4\_team\_members.contestant\_id = 98;                                                                                                                                                                                                                 \\ \hline
DENORM\_19  & SELECT,d4\_team\_members.team\_id,d4\_team\_members.team\_name FROM d4\_team\_members WHERE,d4\_team\_members.contestant\_id = 567;                                                                                                                                                                                                                \\ \hline
DENORM\_20  & SELECT,d4\_team\_members.team\_id,d4\_team\_members.team\_name FROM d4\_team\_members WHERE,d4\_team\_members.contestant\_id = 783549;                                                                                                                                                                                                             \\ \hline
DENORM\_21  & SELECT,d5\_problems.id,d5\_problems.letter,d5\_problems.pdf\_file,d5\_colours.name,d5\_problems.description,d5\_problems.codename,FROM d5\_problems,d5\_colours WHERE d5\_problems.colour\_id = d5\_colours.id AND,d5\_colours.name = 'orange';                                                                                                    \\ \hline
DENORM\_22  & SELECT,d5\_problems.id,d5\_problems.letter,d5\_problems.pdf\_file,d5\_colours.name,d5\_problems.description,d5\_problems.codename,FROM d5\_problems,d5\_colours WHERE d5\_problems.colour\_id = d5\_colours.id AND,d5\_colours.name = 'blue';                                                                                                      \\ \hline
DENORM\_23  & SELECT,d5\_problems.id,d5\_problems.letter,d5\_problems.pdf\_file,d5\_colours.name,d5\_problems.description,d5\_problems.codename,FROM d5\_problems,d5\_colours WHERE d5\_problems.colour\_id = d5\_colours.id AND,d5\_colours.name = 'black';                                                                                                     \\ \hline
DENORM\_24  & SELECT,d5\_problems.id,d5\_problems.letter,d5\_problems.pdf\_file,d5\_colours.name,d5\_problems.description,d5\_problems.codename,FROM d5\_problems,d5\_colours WHERE d5\_problems.colour\_id = d5\_colours.id AND,d5\_colours.name = 'crimson';                                                                                                   \\ \hline
DENORM\_25  & SELECT,d5\_problems.id,d5\_problems.letter,d5\_problems.pdf\_file,d5\_colours.name,d5\_problems.description,d5\_problems.codename,FROM d5\_problems,d5\_colours WHERE d5\_problems.colour\_id = d5\_colours.id AND,d5\_colours.name = 'indigo';                                                                                                    \\ \hline
INDEX\_1    & SELECT,* FROM problems WHERE id = 435862;                                                                                                                                                                                                                                                                                                          \\ \hline
INDEX\_2    & SELECT,* FROM problems WHERE id = 79161;                                                                                                                                                                                                                                                                                                           \\ \hline
INDEX\_3    & SELECT,* FROM problems WHERE id = 250502;                                                                                                                                                                                                                                                                                                          \\ \hline
INDEX\_4    & SELECT,* FROM problems WHERE id = 690126;                                                                                                                                                                                                                                                                                                          \\ \hline
INDEX\_5    & SELECT,* FROM problems WHERE id = 833283;                                                                                                                                                                                                                                                                                                          \\ \hline
INDEX\_6    & SELECT,* FROM contestants WHERE first\_name = 'waifu';                                                                                                                                                                                                                                                                                             \\ \hline
INDEX\_7    & SELECT,* FROM contestants WHERE first\_name = 'jose';                                                                                                                                                                                                                                                                                              \\ \hline
INDEX\_8    & SELECT,* FROM contestants WHERE first\_name = 'neko';                                                                                                                                                                                                                                                                                              \\ \hline
INDEX\_9    & SELECT,* FROM contestants WHERE first\_name = 'java';                                                                                                                                                                                                                                                                                              \\ \hline
INDEX\_10   & SELECT,* FROM contestants WHERE first\_name = 'luxo';                                                                                                                                                                                                                                                                                              \\ \hline
INDEX\_11   & SELECT,* FROM contestants WHERE birthdate \textgreater '1993-10-14' AND birthdate \textless,'1995-10-14';                                                                                                                                                                                                                                          \\ \hline
INDEX\_12   & SELECT,* FROM contestants WHERE birthdate \textgreater '1995-08-07' AND birthdate \textless,'1996-08-07';                                                                                                                                                                                                                                          \\ \hline
INDEX\_13   & SELECT,* FROM contestants WHERE birthdate \textgreater '1998-04-19' AND birthdate \textless,'1999-04-19';                                                                                                                                                                                                                                          \\ \hline
INDEX\_14   & SELECT,* FROM contestants WHERE birthdate \textgreater '2001-12-30' AND birthdate \textless,'2002-12-30';                                                                                                                                                                                                                                          \\ \hline
INDEX\_15   & SELECT,* FROM contestants WHERE birthdate \textgreater '1999-05-12' AND birthdate \textless,'2000-05-12';                                                                                                                                                                                                                                          \\ \hline
INDEX\_16   & SELECT,contestants.id,contestants.first\_name,contestants.last\_name,teams.id,teams.name,teams.institution,FROM contestants,teams,team\_members WHERE teams.institution = 'ligru dre oji,cho ' AND team\_members.contestant\_id = contestants.id AND teams.id = team\_members.team\_id;                                                            \\ \hline
INDEX\_17   & SELECT,contestants.id,contestants.first\_name,contestants.last\_name,teams.id,teams.name,teams.institution,FROM contestants,teams,team\_members WHERE teams.institution = 'vo opeglo cha,yeglo ' AND team\_members.contestant\_id = contestants.id AND teams.id = team\_members.team\_id;                                                          \\ \hline
INDEX\_18   & SELECT,contestants.id,contestants.first\_name,contestants.last\_name,teams.id,teams.name,teams.institution,FROM contestants,teams,team\_members WHERE teams.institution = 'aplu bli,cloipu dretaka blu gla' AND team\_members.contestant\_id = contestants.id AND teams.id,= team\_members.team\_id;                                               \\ \hline
INDEX\_19   & SELECT,contestants.id,contestants.first\_name,contestants.last\_name,teams.id,teams.name,teams.institution,FROM contestants,teams,team\_members WHERE teams.institution = 'ka elleclo,wuchoodrixowini ba za ' AND team\_members.contestant\_id = contestants.id AND,teams.id = team\_members.team\_id;                                             \\ \hline
INDEX\_20   & SELECT,contestants.id,contestants.first\_name,contestants.last\_name,teams.id,teams.name,teams.institution,FROM contestants,teams,team\_members WHERE teams.institution = 'ovi:,tuogirrerri bruipu vebrayoti ' AND team\_members.contestant\_id,= contestants.id AND teams.id = team\_members.team\_id;                                            \\ \hline
C\_1        & CREATE,TABLE d1\_problems\_content AS SELECT id,plain\_text\_content FROM problems;                                                                                                                                                                                                                                                                \\ \hline
C\_2        & CREATE,TABLE d1\_problems AS SELECT,problems.id,problems.letter,problems.pdf\_file,problems.ballon\_colour,problems.description,problems.codename,FROM problems,d1\_problems\_content WHERE problems.id = d1\_problems\_content.id;                                                                                                                \\ \hline
C\_3        & CREATE,TABLE d2\_problems AS SELECT,problems.id,problems.letter,problems.pdf\_file,problems.ballon\_colour,problems.plain\_text\_content,problems.description,problems.codename,contests.name,AS contest\_name FROM problems,contests,problem\_set WHERE problem\_set.problem\_id,= problems.id AND problem\_set.contest\_id = contests.id;        \\ \hline
C\_4        & CREATE,TABLE d3\_teams AS SELECT,teams.id,teams.institution,teams.coach\_id,teams.name,teams.site\_id,teams.approved,teams.include\_coach\_cert,teams.make\_coach\_individual\_cert,sites.country\_id,AS country\_id FROM teams,sites WHERE teams.site\_id = sites.id;                                                                             \\ \hline
C\_5        & CREATE,TABLE d4\_team\_members AS SELECT,team\_members.id,team\_members.contestant\_id,team\_members.team\_id,team\_members.role\_id,team\_members.registration\_complete,team\_members.on\_team\_certificate,team\_members.on\_individual\_certificate,teams.name,AS team\_name FROM teams,team\_members WHERE team\_members.team\_id = teams.id; \\ \hline
C\_6        & CREATE,TABLE d5\_colours AS SELECT row\_number()over() AS id,problems.ballon\_colour AS,name FROM problems GROUP BY ballon\_colour;                                                                                                                                                                                                                \\ \hline
C\_7        & CREATE,TABLE d5\_problems AS SELECT,problems.id,problems.letter,problems.pdf\_file,d5\_colours.id AS,colour\_id,problems.plain\_text\_content,problems.description,problems.codename,FROM problems,d5\_colours WHERE problems.ballon\_colour = d5\_colours.name;                                                                                   \\ \hline
FINAL\_1 & SELECT contestants.first\_name AS coach\_first\_name, contestants.last\_name AS coach\_last\_name, teams.name AS actual\_team\_name, teams.institution AS actual\_team\_institution, coach\_teams.institution AS former\_team\_institution, coach\_teams.name AS former\_team\_name FROM public.contestants, public.team\_members, public.teams, public.teams coach\_teams WHERE contestants.id = team\_members.contestant\_id AND team\_members.team\_id = coach\_teams.id AND teams.coach\_id = contestants.id LIMIT 50; \\ \hline
FINAL\_2 & SELECT coach\_first\_name, coach\_last\_name, actual\_team\_name, actual\_team\_institution, former\_team\_institution, former\_team\_name FROM non\_materialized LIMIT 50;                                                                                                                                                                                                                                                                                                                                                \\ \hline
FINAL\_3 & SELECT coach\_first\_name, coach\_last\_name, actual\_team\_name, actual\_team\_institution, former\_team\_institution, former\_team\_name FROM materialized LIMIT 50;;                                                                                                                                                                                                                                                                                                                                                    \\ \hline
FINAL\_4 & SELECT stored\_procedure() LIMIT 50;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       \\ \hline
FINAL\_5 & SELECT stored\_procedure\_params('1989-11-27') LIMIT 50; 
\\ \hline
\end{tabular}%
}
\end{table}

\end{document}
