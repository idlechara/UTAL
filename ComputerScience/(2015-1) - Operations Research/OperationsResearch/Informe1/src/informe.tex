\documentclass[11pt]{utalcaDoc}
\usepackage{alltt}
\usepackage{underscore}
\usepackage[latin1]{inputenc}
\usepackage[activeacute,spanish]{babel}
\usepackage{verbatim}
\usepackage[pdftex]{graphicx}
\usepackage{epstopdf}
\usepackage{ae}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage[stable]{footmisc}
\input{spanishAlgorithmic}

\title{{\bf Investigación de operaciones}\\Optimización utilizando colonias de hormigas}
\author{Erik Regla, Daniela Paredes, Cristobal Henriquez\\ \texttt{eregla09@alumnos.utalca.cl, dparedes09@alumnos.utalca.cl,}\\ \texttt{chenriquez09@alumnos.utalca.cl} }
\date{28 de Junio del 2015}

\begin{document}
\renewcommand{\figurename}{Figura~}
\renewcommand{\tablename}{Tabla~}

\maketitle

\section{Resumen ejecutivo}
Se presenta una introducción a los sistemas de optimización utilizando colonias de hormigas por medio del \textit{El problema del estudiante viajero} como ejemplo práctico, a modo de presentar las ventajas, desventajas y orígenes de esta metaheurística junto con una explicación conceptual de esta técnica a modo de no condicionar al lector además de proporcionar una base comparativa frente a soluciones deterministas para el ejemplo a modo de motivación.

\section{El problema del \textit{estudiante viajero}\footnote{%El porqué del nombre para este problema se abordará en la presentación.
Un estudiante quiere salir a colación y probar cada completo disponible en el camino. Pero no quiere pasar dos veces por el mismo camino para que después sus compañeros no lo traten de glotón. El viaje debe de ser ida y vuelta porque tiene clases al bloque siguente.}}
Sea $G(V,E)$ un grafo dirigido con pesos $W(E_1,E_2)$. Se desea saber un recorrido entre dos nodos $t(u,v)$ y $t(v,u)$ de modo que $t(u,v) \cap t(v,u) = \emptyset$ en que $w(t(u,v)\ +\ w(t(v,u)$ sea mínimo.

\subsection{Acercamientos deterministas para obtener la solución óptima}

Usualmente al resolver un problema computacionalmente, nos interesa obtener la solución óptima de manera determinista. A continuación, se presentan algunos acercamientos típicos bajo esta premisa.

\subsubsection{Acercamiento 1: Algoritmo de Dijkstra \footnote{Se asume que el lector posee un nivel mínimo de conocimiento sobre algoritmos para recorridos de grafos y crecimiento de funciones.}}
Una forma rápida de encontrar el camino más corto entre dos nodos de un grafo es utilizar el \textit{Algoritmo de Dijkstra} sobre los vértices $u$ y $v$, el cual ofrece una complejidad $O(|E|\ + \ |V|\ log(|V|))$ en el peor caso asumiendo que $w(u, v) \geq 0, \forall w(u,v) \in E, \forall u,v \in V$. Sin embargo el problema viene en que este algoritmo solo es capaz de computar el primer viaje $T(u,v)$, pero no necesariamente es capaz de garantizar la existencia de un viaje $T(v,u)$ luego de ser ejecutado. 
La opción entonces sería utilizar \textit{backtracking} para generar iterativamente todos los $T(u,v)$ posibles y en base a esta solución generar circuitos $T(v,u)$ prometedores para luego elegir el óptimo. Sin embargo, esta alternativa es $ \omega (( |E| \times |V| )^{2})$, lo cual lo vuelve una opción inviable para este problema.

\subsubsection{Acercamiento 2: Programación dinámica}
Conceptualmente, es posible aplicar la búsqueda de un camino corto entre dos nodos para resolver el problema fácilmente si $u$ y $v$ son adyacentes calculando $min(w(u,v))$ y $min(w(v,u))$. Si $x \in V,\ \exists\ e(u,x),\ \exists\ e(x,v)$ y
$x' \in V,\ \exists e(x,u),\ \exists e(v,x)$ entonces es posible calcular $T(u.v)$ mínimo utilizando $T(u,x)$, $T(v,x)$, $T(v,u)$y $T(u,x)$ pero si y solo si $x \neq x'$. Este concepto es constructivamente extensible $x$ y $x`$ por definición, con lo cual ahora hemos cambiado el problema de generar todas las rutas de ida y vuelta posibles para ahora encontrar $x$ y $x`$ prometedores y con ellos luego entregar el la solución óptima.

\section{Algoritmos aproximados y aleatorios}
Está claro que si nos apegamos a una solución determinista para obtener la solución óptima al problema estamos obligados a generar y evaluar todas las posibilidades, lo cual presenta una alta complejidad de tiempo y espacio. En la literatura como también en la naturaleza se puede observar innumerables ejemplos en donde algoritmos que introducen aleatoriedad en los datos o el algoritmo mismo presentan soluciones rápidas con un error mínimo a problemas como por ejemplo el cálculo de $\pi$ utilizando un algoritmo \textit{MonteCarlo} o el como las hormigas encuentran comida y devoran rápidamente un cadaver en la selva.

\subsection{Heurísticas}
Una herurística es un conjunto de instrucciones que resuelve un problema. A diferencia de la definición de algoritmo, esta carece de la parte \textit{``conjunto de pasos finitos"} o \textit{``y determinista"} por la sencilla razón que tan solo resuelve el problema. No hay garantías que la solución sea óptima. Desde un punto de vista filosófico los animales son la aplicación misma de este concepto, a ellos no les interesa llevar una vida ostentosa y llena de lujos, tan solo les interesa vivir y no requieren una receta finita y determinista para lograrlo.

\begin{algorithm}
\begin{algorithmic}[1]%\REQUIRE %\ENSURE 
\WHILE{está vivo}
	\STATE despertar()
	\STATE espabilar()
	\STATE ducharse()
	\STATE desayunar()
	\STATE viajar_a_la_u()
	\FORALL{bloque i en bloques_del_día}	
		\IF {es tiempo libre}
			\IF {tiene hambre}
				\STATE ir_a_buscar_algo_de_comida()
			\ELSE
				\IF{motivado}
					\STATE estudiar()
				\ELSE			
					\STATE sacar_la_vuelta()
				\ENDIF
			\ENDIF
		\ELSE
			\IF {la clase es aburrida}
				\STATE sacar_la_vuelta()
			\ELSE
				\STATE prestar_atención()
			\ENDIF
		\ENDIF
	\ENDFOR
	
	\STATE regresar_a_casa()
	\STATE dormir()
\ENDWHILE
\end{algorithmic}
\caption{Algoritmo de un estudiante promedio}\label{ALG:EST_VIAJERO}
\end{algorithm}

Por ejemplo, incluso si quisiéramos describir a grandes rasgos el algoritmo que describe el comportamiento de un estudiante universitario promedio (Algoritmo \ref{ALG:EST_VIAJERO}), necesitamos muchas instrucciones para poder llegar a una idea básica de este. Esto es gracias a que la dimensión intrínseca del problema es demasiado alta, hay demasiadas variables a controlar, por lo cual generar un modelo genérico para poder describirlo solo termina en un fracaso. 


\begin{algorithm}
\begin{algorithmic}[1]%\REQUIRE %\ENSURE 
\WHILE{está vivo}
	\IF {tiene hambre}
		\STATE ir_a_buscar_algo_de_comida()		
	\ENDIF
	\IF{está aburrido}
		\STATE perseguir_ruedas()
		\STATE espabilar()
	\ENDIF
	\IF{está cansado}
		\STATE dormir()
	\ENDIF
\ENDWHILE
\end{algorithmic}
\caption{Algoritmo de un perro promedio}\label{ALG:DOGE}
\end{algorithm}

Un caso diferente ocurre si nos dedicamos a estudiar el comportamiento de un perro promedio, es fácil llevar el modelo a cualquier tipo de perro, ya sea domesticado o salvaje por la simple razón de que todos se comportan igual. Factores como la edad, raza, origen y si su dueño los peinó o no poco interesan o afectan el resultado. Pero a final de cuentas, tanto el perro como el estudiante son seres vivos, si quisiéramos resolver el problema de darle vida a un planeta dejar una colonia de perros o una colonia de humanos es una solución, pero si quisiéramos vida inteligente entonces estamos obligados a ir por el camino difícil. Gracias a esto, podemos hacer una analogía entre heurística y la vida del perro, para simplificar los términos.


\subsection{Caso de estudio: Comportamiento de hormigas en la naturaleza}
En las colonias de hormigas muchas de estas tienen distintos roles, pero nuestro interés cae sobre las hormigas obreras que se dedican a labores de exploración y alimentación de la colonia. Tomemos por ejemplo una colonia cualquiera, en la cual salen miles de hormigas por la entrada de esta vagando aleatoriamente por un terreno. Se sabe de algunas hormigas que utilizan visión y memoria como método de orientación, pero también utilizan el apoyo de fermonas para dejar un \textit{rastro de galletas} desde el hormiguero a su posición actual el cual también es utilizado por otras hormigas para influenciar su decisión de tomar un camino u otro.\footnote{Algo similar ocurre con el turismo. Al momento de elegir un buen lugar para comer uno tiende a pensar que si el lugar es bien concurrido, entonces es bueno, lo cual influencia nuestra descición.} Asumamos entonces, que todas las hormigas poseen feromonas diferentes para indicar si están en un viaje de exploración o ya están regresando de una exploración exitosa. Las feromonas se evaporan al cabo de un tiempo dado, si esta encuentra entonces podemos considerar tres casos:

\begin{enumerate}
	\item La hormiga fue devorada por algún animal. En este caso, su rastro de feromonas al cabo de un tiempo se va a evaporar evitando que otra hormiga la encuentre y siga el mismo camino, por ende ser devorada.
	\item La hormiga encontró comida y se está regresando. En este caso, la hormiga necesita volver por el camino donde volvió y para prevenir que las feromonas que la llevan a destino se evaporen, escribe un nuevo rastro. Dado que la hormiga tiene un pequeño rango de visión, aprovecha de acortar el camino cuando se da cuenta que puede acortar la distancia entre su posición actual al siguiente tramo de feromona más cercano. Un camino más corto implica que la feromona va a ser más fuerte al momento en que la hormiga se regrese a ese tramo en comparación a un camino largo.
	\item La hormiga efectivamente encontró comida pero fue devorada. Si bien alcanzó a marcar el tramo final con feromona extra, el primer trazo en evaporarse es el el primero que hizo, por ende la conexión a la colonia se pierde y evita que futuras hormigas sean guiadas allá.
\end{enumerate}

Si el caso que ocurrió efectivamente fue el dos (el cual provee solución al problema de la colonia de buscar alimento), la hormiga al regresar a la colonia y entrar por esta hará que su rastro de feromona sea más intenso por el mero hecho de ser más reciente, lo cual influencia a otras hormigas a seguir ese camino por ser atractivo para ellas y gracias a esto, este rastro se intensifica progresivamente a medida que aumenta el número de hormigas circulando por este tramo. De hecho, el que las feromonas se evaporen también es útil, ya que ayuda a prevenir el primer y último caso.

Un fenómeno interesante de observar es cuando las hormigas ya habiendo encontrado comida y un buen número de ellas está en el camino, dos hormigas chocan porque no pueden estar en el mismo espacio. Una de estas tiene que ceder lo cual crea dos rastros de feromonas diferentes, dividiendo el camino en dos. Cuando dos hormigas lleguen a esta bifurcación, elegirán con una alta probabilidad el camino que presente la mayor concentración de feromonas (el cual tiende a corresponder al camino más directo). Al repetirse este proceso una y otra vez, lo que antes era un ruta aleatoria continuamente se va transformando en una ruta directa entre el alimento y la colonia.

\subsection{Optimización de recorridos en grafos utilizando algoritmos inspirados en colonias de hormigas}
Del caso de estudio anterior, podemos notar que las hormigas circulan en un espacio y dan solución a  mejorar el recorrido entre el alimento y la colonia. El comportamiento de las hormigas resulta ser bastante efectivo cuando el problema viene dado por la información topológica de este.

El problema anterior del \textit{estudiante viajero} es un problema que viene dado por la información topológica en forma de lugares por los cuales pasar y el costo que tiene. En el Algoritmo \ref{ALG:COMPORTAMIENTO} es posible observar que se requiere de alguna condición de término. El problema de esta solución es que dado que no se sabe cual es la solución óptima, tampoco se sabe con exactitud cuando detener el progreso de este.

\begin{algorithm}
\begin{algorithmic}[1]
%\REQUIRE $G$ un grafo
%\ENSURE $A[p]$ es la mediana de $A$
\WHILE{condición de término no cumplida}
	\STATE $moverHormigas()$
	\STATE $evaporarFerormonas()$
\ENDWHILE
\end{algorithmic}
\caption{Algoritmo para comportamiento de una colonia}\label{ALG:COMPORTAMIENTO}
\end{algorithm}

\begin{algorithm}
\begin{algorithmic}[1]
%\REQUIRE $G$ un grafo
%\ENSURE $A[p]$ es la mediana de $A$
\STATE $w \leftarrow evaluarSolucionesLocales()$
\STATE $w' \leftarrow elegirSolucionesPrometedoras(w)$
\STATE $moverA(w')$
\STATE $depositarFeromona(w')$
\end{algorithmic}
\caption{Algoritmo para comportamiento de una hormiga}\label{ALG:HORMIGA}
\end{algorithm}

\subsubsection{Resolución del problema del estudiante viajero utilizando colonias de hormigas}
Siguiendo la mísma lógica desarrollada en el ejemplo anterior, extendemos el comportamiento descrito en el Algoritmo \ref{ALG:HORMIGA} para resolver el problema inicial. Esto no es necesario para el comportamiento de la colonia, dado que en este caso, no afecta a la solución.

En primera instancia la hormiga verifica si es que ya cumplió con la construcción del circuito, vale decir, si ya desarrolló una ruta $T$ de ida y vuelta ente $u$ y $v$ sin pasar dos veces por el mismo vértice. Luego, en base a la visibilidad sobre la arista actual obtiene todas las aristas que no haya visitado y de estas evalua una a una la intensidad de las feromonas en la arista. Las señales de feromonas son algo global a todas las hormigas, información compartida entre todas las hormigas que componen la colonia. Esta también tiene cierto grado de aleatoriedad, por tanto no necesariamente la que presente la señal más grande es la que será elegida como siguiente destino, tan solo quiere decir que tiene una probabilidad mas alta de ser elegida que el resto. Una vez calculada la ponderación final de cada arista se elige la más alta y se agrega a la ruta actual provocando que la hormiga avance. 


\begin{algorithm}
\begin{algorithmic}[1]
\REQUIRE $G(V,E)$ un grafo, $W(u,v)$ son los pesos de G, $T$ es un arreglo global de circuitos, $T'$ es la ruta actualmente computada, $o$ es el vértice origen, $a$ es el vértice actual, $d$ es el vértice destino
\ENSURE $T$ contiene las rutas calculadas
\IF{$T'$ es circuito}
	\STATE agregar $T'$ a $T$
	\STATE $T' \leftarrow \emptyset$
	\STATE agregar $u$ a $T'$
\ENDIF

\STATE $p \leftarrow \emptyset$

\FORALL{$v$ en $V$ que construya $E(a,v)$}
	\IF{$v \notin T$}
		\STATE agregar $v$ a $p$
	\ENDIF
\ENDFOR

\IF{$p$ no contiene aristas}
	\STATE marcarFeromonaNegativamente(a)
	\STATE regresarHormiga()
\ELSE
	\STATE $p \leftarrow evaluarFeromonas(p)$
	\IF{$p$ no contiene aristas prometedoras}
		\STATE $p' \leftarrow extraerMínimo(p)$
		\STATE agregar p`a T
	\ELSE
		\STATE marcarFeromonaNegativamente(a)
		\STATE regresarHormiga()
	\ENDIF
\ENDIF

\end{algorithmic}
\caption{Algoritmo para comportamiento de una hormiga para resolver el problema del estudiante viajero}\label{ALG:HORMIGA_VIAJERA}
\end{algorithm}

Puede ocurrir en el Algoritmo \ref{ALG:HORMIGA_VIAJERA} que no existan aristas disponibles para visitar en el momento, entonces, la hormiga se regresa y marca la arista actual con una feromona negativa, de modo de indicar que para la ruta actual, esa arista crea un camino cerrado. También puede ocurrir que si bien hay aristas disponibles, ninguna de estas le parezca una buena opción a la hormiga, en cuyo caso se regresa y deja una marca que para esa ruta esa arista no es prometedora. Solo si es prometedora la ruta deja una feromona atractiva junto con la información de la ruta.

\subsection{Variantes y mejoras a algoritmos basados en colonias de hormigas para otros problemas}
\begin{itemize}
	\item \textit{ASrank}: Agrega información de la ruta actual hecha por cada hormiga a cada rastro de feromona que deja esta a modo de poder clasificar las soluciones.
	\item \textit{Lógica difusa}: En ciertos casos, permite acelerar la búsqueda.
	\item \textit{Max-Min (MMAS)}: Solo la mejor iteración deposita feromonas. En caso de producirse un estancamiento, todas las feromonas son reinicializadas con el valor máximo.
	\item \textit{Sistema elitista}: La mejor solución global deposita feromonas automáticamente junto con las otras hormigas en cada iteración. De esta manera, se asegura que la mejor solución en el momento persista.
\end{itemize}

\section{Conclusiones}

\subsection{Ventajas del uso de optimizaciones basadas en colonias de hormigas}
\begin{itemize}
	\item Dado que las feromonas se van evaporando, evitan la congestion en óptimos locales.
	\item Por lo general, cuando el problema viene dado por su topología, implementar colonias de hormigas es más sencillo que implementar una solución determinista.
	\item Dependiendo del problema, la complejidad espacial puede ser mucho más baja que la requerida por un algoritmo determinista.
\end{itemize}

\subsection{Desventajas del uso de optimizaciones basadas en colonias de hormigas}
\begin{itemize}
	\item Al ser un algoritmo \textit{Montecarlo}, su complejidad temporal no está definida.
	\item La solución que se obtiene con esta metaheurística no necesariamente es la óptima y podría no converger a ninguna solución.
\end{itemize}

En general, se puede afirmar que los sistemas de optimización basados en colonias de hormigas proveen de una solución aproximada fácil de implementar en caso de que el problema pueda ser transformado a alguno similar al de recorridos de grafos con una solución descrita directamente por la información topológica de este. Además como se pudo observar, a diferencia de una solución determinista, las metaheurística detras del comportamiento de colonias de hormigas para ser comprendidas no requiere apegarse estrictamente a una definición formal y es fácil de comprender, lo cual es una ventaja al momento de resolver problemas complejos.

\end{document}